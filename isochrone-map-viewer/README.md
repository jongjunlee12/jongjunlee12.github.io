# 🗺️ Isochrone + POI Map

특정 좌표에서 **도보/차량**으로 일정 시간 내 도달 가능한 영역(등시선도)을 시각화하고, 해당 영역 내 **POI(관심지점)**를 검색하는 대시보드입니다.

![Python](https://img.shields.io/badge/Python-3.11+-blue)
![Streamlit](https://img.shields.io/badge/Streamlit-1.51.0-red)
![License](https://img.shields.io/badge/License-MIT-green)

## ✨ 특징

### 등시선도 (Isochrone)
- **API 키 불필요** - OpenStreetMap 데이터를 직접 다운로드하여 사용
- **로컬 계산** - 등시선 계산이 100% 로컬에서 수행됨
- **다중 시간대** - 5, 10, 15, 20, 30, 60분 동시 표시 가능
- **색상 구분** - 시간대별 다른 색상으로 구분

### POI 검색
- **네이버 지역검색 API** 연동
- **22개 카테고리** 지원 (마트, 편의점, 학교, 병원 등)
- **등시선 영역 내 필터링** - 도달 가능한 POI만 표시
- **CSV 내보내기** - 검색 결과 다운로드

### UI/UX
- **깔끔한 UI** - Carto Positron 스타일의 밝은 회색 지도
- **지도 클릭** - 클릭으로 좌표 선택 가능
- **실시간 업데이트** - 조건 변경 시 즉시 반영

## 🖼️ 화면 구성

```
┌─────────────────────────────────────────────────────────────────────────┐
│  🗺️ Isochrone + POI Map                                                 │
├─────────────────────────────────────────────────────────────────────────┤
│  ┌─── 사이드바 ───┐   ┌─────── 지도 영역 ─────────┐  ┌─ 데이터 ─┐       │
│  │ 🔑 네이버 API   │   │                          │  │ 📊 POI   │       │
│  │ 📍 좌표 입력    │   │   ┌──────────────────┐   │  │ 데이터   │       │
│  │ 위도: 37.5665  │   │   │ 30분 ━━━━━━━━━━━━│   │  │          │       │
│  │ 경도: 126.9780 │   │   │  20분 ━━━━━━━━━ │   │  │ 총 15개  │       │
│  │                │   │   │   15분 ━━━━━━━  │   │  │ 약국: 3  │       │
│  │ 🚶 도보 / 🚗 차량│   │   │    📍 🏪 🏥 🏫   │   │  │ 마트: 2  │       │
│  │ ⏱️ 5,10,15,20분 │   │   │                  │   │  │ ...      │       │
│  │                │   │   └──────────────────┘   │  │          │       │
│  │ [🔍 등시선생성] │   │                          │  │ [📥 CSV] │       │
│  │                │   │                          │  │          │       │
│  │ 🏪 POI 카테고리 │   │                          │  │ 🎨 범례  │       │
│  │ ☑ 약국 ☑ 마트  │   │                          │  │ ● 5분    │       │
│  │ ☑ 병원 ☐ 학교  │   │                          │  │ ● 10분   │       │
│  │                │   │                          │  │ ● 15분   │       │
│  │ [🔎 POI 검색]  │   │                          │  │ ● 20분   │       │
│  └────────────────┘   └──────────────────────────┘  └──────────┘       │
└─────────────────────────────────────────────────────────────────────────┘
```

## 🚀 빠른 시작

### 1. 저장소 클론

```bash
git clone https://github.com/jongjunlee12/jongjunlee12.github.io.git
cd jongjunlee12.github.io/isochrone-map-viewer
```

### 2. 가상환경 생성 및 활성화

```bash
python -m venv venv
source venv/bin/activate  # Windows: venv\Scripts\activate
```

### 3. 의존성 설치

```bash
pip install -r requirements.txt
```

### 4. 앱 실행

```bash
streamlit run app.py
```

브라우저에서 `http://localhost:8501` 접속

## 🔑 네이버 API 설정

POI 검색 기능을 사용하려면 네이버 개발자센터에서 API 키가 필요합니다.

1. [네이버 개발자센터](https://developers.naver.com/) 접속
2. 애플리케이션 등록
3. **검색 API** 사용 신청 (지역 검색 포함)
4. Client ID와 Client Secret 발급
5. 앱 사이드바에서 키 입력

## 📦 기술 스택

| 라이브러리 | 버전 | 용도 |
|-----------|------|------|
| Streamlit | 1.51.0 | 웹 프레임워크 |
| OSMnx | 2.0.7 | OpenStreetMap 데이터 다운로드 |
| NetworkX | 3.4+ | 그래프 분석 (등시선 계산) |
| Folium | 0.19.0 | 지도 시각화 |
| Shapely | 2.0+ | 폴리곤 생성 & 공간 필터링 |
| Requests | 2.31+ | 네이버 API 호출 |
| Pandas | 2.2+ | 데이터 처리 & CSV 내보내기 |

## 📖 사용법

### 등시선 생성
1. **좌표 입력** 또는 **지도 클릭**으로 중심점 설정
2. **이동 수단 선택**: 도보 🚶 또는 차량 🚗
3. **시간 선택**: 원하는 시간대 다중 선택 가능
4. **"등시선 생성"** 버튼 클릭

### POI 검색
1. **네이버 API 키** 입력 (사이드바 상단)
2. **POI 카테고리** 선택 (다중 선택 가능)
3. **"POI 검색"** 버튼 클릭
4. 결과 확인 후 **CSV 다운로드**

## 🏪 지원 POI 카테고리

| 카테고리 | 카테고리 | 카테고리 |
|---------|---------|---------|
| 대형마트 | 편의점 | 어린이집 |
| 유치원 | 학교 | 입시학원 |
| 일반학원 | 주차장 | 주유소 |
| 충전소 | 지하철역 | 은행 |
| 문화시설 | 중개업소 | 공공기관 |
| 관광명소 | 숙박 | 음식점 |
| 카페 | 병원 | 약국 |
| 소매(의류/신발) | | |

## ⚠️ 주의사항

- **첫 실행 시** 도로 네트워크 다운로드로 10~30초 소요
- **이후 실행**은 캐싱으로 5초 이내
- 인터넷 연결 필요 (도로 네트워크 & API)
- 네이버 API 일일 호출 제한 확인 필요

## 🔧 트러블슈팅

### OSMnx 설치 오류

```bash
# conda 사용 권장
conda install -c conda-forge osmnx
```

### 메모리 부족

큰 영역(60분 차량 등)은 메모리를 많이 사용합니다.
시간을 줄이거나 도보 모드를 사용해보세요.

### POI가 표시되지 않음

- 네이버 API 키가 올바른지 확인
- 등시선 영역이 너무 작지 않은지 확인
- 해당 지역에 검색 결과가 있는지 확인

## 📄 라이선스

MIT License

## 🙏 감사

- [OSMnx](https://github.com/gboeing/osmnx) by Geoff Boeing
- [OpenStreetMap](https://www.openstreetmap.org/) contributors
- [Streamlit](https://streamlit.io/) team
- [Naver Developers](https://developers.naver.com/)
